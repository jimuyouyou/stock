<html>

<head>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.15/lodash.core.min.js"></script>
  <style>
    table {
      border-collapse: collapse;
    }

    td {
      border: 1px solid black;
    }

    .sorting {
      color: blue;
      cursor: pointer;
    }
  </style>
</head>

<body onload="showDefaultTable();">
  <div id="modelPeformance"></div>
  <hr>
  <div id='tableContainer'></div>
  <hr>
  <textarea name="" id="featuresTextarea" cols="30" rows="10" onChange="showUnique()"></textarea>
</body>
<script>
  const H100_WEIGHTS = {XGBRFRegressor: 100, LGBMRegressor: 0.013187392852433075, BayesianRidge: 16.778523489932887};
  let featureArray = [];

  const fs = [{
    model: 'XGBRFRegressor',
    performance: 3.5,
    up: 0.557,
    down: 0,
    data: [['2h_CDLBREAKAWAY', 0.0], ['2h_CDL2CROWS', 0.0], ['2h_CDLUNIQUE3RIVER', 0.0], ['12h_CDLBREAKAWAY', 0.0], ['12h_CDLRISEFALL3METHODS', 0.0], ['12h_CDL2CROWS', 0.0], ['12h_CDLSTALLEDPATTERN', 0.0], ['12h_CDL3BLACKCROWS', 0.0], ['12h_CDLUNIQUE3RIVER', 0.0], ['12h_CDL3WHITESOLDIERS', 0.0], ['12h_CDLIDENTICAL3CROWS', 0.0], ['12h_CDLGAPSIDESIDEWHITE', 0.0], ['12h_CDLMORNINGDOJISTAR', 0.0], ['12h_CDLHOMINGPIGEON', 0.0], ['12h_CDLPIERCING', 0.0], ['2h_CDLHIKKAKEMOD', 0.00012752482], ['2h_CDLRISEFALL3METHODS', 0.00036184554], ['2h_CDLPIERCING', 0.0008732626], ['2h_CDLSTALLEDPATTERN', 0.0012523022], ['2h_CDLRICKSHAWMAN', 0.0014108483], ['2h_CDLMARUBOZU', 0.0017628584], ['2h_CDLCLOSINGMARUBOZU', 0.0018216493], ['12h_CDLDOJI', 0.0020387587], ['2h_CDLTASUKIGAP', 0.0022368585], ['2h_HT_TRENDMODE', 0.0023606424], ['2h_CDLLONGLINE', 0.0027529264], ['2h_CDLGAPSIDESIDEWHITE', 0.0028056514], ['2h_STOCH1', 0.002846303], ['2h_STOCH3', 0.0029136906], ['2h_CDLLONGLEGGEDDOJI', 0.0029983942], ['2h_RSI2', 0.0030662874], ['2h_TRIX2', 0.003098779], ['2h_STOCH2', 0.0031071666], ['2h_CMO1', 0.003135569], ['2h_CDLSHORTLINE', 0.0031544287], ['2h_CDLHIKKAKE', 0.003177161], ['2h_CMO2', 0.0031785814], ['2h_STOCH4', 0.0032327294], ['2h_CDLDOJI', 0.00337024], ['12h_CDLDRAGONFLYDOJI', 0.0033916235], ['2h_CDLADVANCEBLOCK', 0.003498962], ['2h_STOCHF3', 0.0035410577], ['2h_CDLMATCHINGLOW', 0.003580277], ['12h_STOCHRSI2', 0.0036525177], ['2h_PPO2', 0.0036998226], ['12h_CDLSHORTLINE', 0.0037032084], ['2h_CDLBELTHOLD', 0.003736845], ['2h_AROONOSC1', 0.003816825], ['2h_MFI2', 0.0038221583], ['2h_STOCHF2', 0.0038889], ['2h_TRIX1', 0.0039131613], ['2h_HT_PHASOR2', 0.0039301375], ['2h_STOCHF4', 0.003980739], ['2h_PPO3', 0.004071557], ['12h_CDLLONGLEGGEDDOJI', 0.0040875706], ['12h_HT_TRENDMODE', 0.0040917853], ['2h_HT_SINE2', 0.004161189], ['2h_HT_DCPERIOD', 0.0041967416], ['2h_RSI1', 0.0042264974], ['2h_STOCHF1', 0.004227765], ['2h_MFI1', 0.004229974], ['2h_CDLHANGINGMAN', 0.0042685824], ['2h_WILLR1', 0.004272213], ['2h_CDL3BLACKCROWS', 0.0042880205], ['2h_HT_SINE1', 0.004288596], ['2h_CDLENGULFING', 0.0043756347], ['2h_CDLSPINNINGTOP', 0.0044076275], ['2h_HT_PHASOR1', 0.0044181887], ['2h_WILLR2', 0.004437647], ['2h_STOCHRSI4', 0.004444165], ['2h_ULTOSC2', 0.004495236], ['12h_CDLTAKURI', 0.0045149806], ['2h_CDLSHOOTINGSTAR', 0.004525964], ['12h_CDLCLOSINGMARUBOZU', 0.004552056], ['12h_STOCHRSI4', 0.0046452414], ['2h_ULTOSC1', 0.004710187], ['2h_PPO1', 0.004724177], ['2h_STOCHRSI2', 0.004728958], ['2h_ADX1', 0.0047399574], ['2h_HT_DCPHASE', 0.004769342], ['2h_PPO4', 0.0048559476], ['12h_PPO1', 0.004861197], ['12h_CDLHANGINGMAN', 0.0048897737], ['2h_AROONOSC2', 0.004924921], ['2h_CDLMORNINGDOJISTAR', 0.004934465], ['2h_STOCHRSI1', 0.0049426025], ['2h_CDLGRAVESTONEDOJI', 0.0050097764], ['12h_HT_PHASOR2', 0.005022737], ['12h_STOCH2', 0.0050474466], ['12h_CDLRICKSHAWMAN', 0.0050567496], ['12h_CDLLONGLINE', 0.005092927], ['12h_CDLSPINNINGTOP', 0.005107703], ['12h_MFI2', 0.0051152576], ['12h_TRIX1', 0.0051188027], ['12h_STOCHF1', 0.005129207], ['12h_CDLHIKKAKE', 0.0052690594], ['2h_CDL3OUTSIDE', 0.0053442167], ['12h_STOCHF2', 0.005371325], ['2h_STOCHRSI3', 0.005391956], ['12h_WILLR1', 0.005405444], ['2h_DX2', 0.0054258234], ['12h_HT_DCPERIOD', 0.0054557226], ['12h_CDLTHRUSTING', 0.005728433], ['12h_ULTOSC1', 0.005780885], ['2h_DX1', 0.0057946015], ['12h_DX2', 0.0059178416], ['2h_CDLTHRUSTING', 0.005932493], ['12h_DX1', 0.0059656953], ['12h_PPO4', 0.006065571], ['2h_CDLDRAGONFLYDOJI', 0.00611337], ['12h_CDLBELTHOLD', 0.0061621554], ['2h_CCI1', 0.006176028], ['12h_STOCH1', 0.006208227], ['12h_HT_PHASOR1', 0.00621008], ['2h_CDLDOJISTAR', 0.0062246462], ['12h_STOCH4', 0.0062409746], ['12h_STOCHF4', 0.0062710405], ['12h_STOCHRSI1', 0.006309523], ['12h_PPO3', 0.006310456], ['12h_CDL3INSIDE', 0.006353396], ['12h_STOCH3', 0.0063549355], ['2h_CCI2', 0.0064090244], ['12h_WILLR2', 0.006430188], ['2h_ADX2', 0.0064441976], ['12h_ULTOSC2', 0.0064803436], ['12h_STOCHF3', 0.006483197], ['12h_ADX1', 0.006547273], ['12h_MFI1', 0.006630448], ['12h_CDLHARAMICROSS', 0.0067570694], ['12h_CDLEVENINGSTAR', 0.0067817057], ['12h_HT_DCPHASE', 0.00686678], ['12h_AROONOSC1', 0.0069486257], ['12h_STOCHRSI3', 0.00697357], ['12h_CMO2', 0.0069820536], ['2h_CDLSEPARATINGLINES', 0.00708749], ['12h_RSI2', 0.007096515], ['12h_CDLENGULFING', 0.0070993034], ['12h_TRIX2', 0.0071451315], ['12h_CMO1', 0.0071757142], ['12h_AROONOSC2', 0.0071850256], ['2h_CDLTAKURI', 0.007267426], ['12h_HT_SINE1', 0.0073262732], ['12h_CCI1', 0.007432237], ['2h_CDLDARKCLOUDCOVER', 0.0074538365], ['12h_PPO2', 0.0075559304], ['12h_CCI2', 0.0076007857], ['12h_ADX2', 0.007637669], ['12h_CDLHIGHWAVE', 0.007676708], ['12h_CDLHAMMER', 0.0081295455], ['12h_CDLSEPARATINGLINES', 0.008192509], ['12h_CDLMARUBOZU', 0.008209015], ['2h_CDLXSIDEGAP3METHODS', 0.0082861055], ['12h_CDL3OUTSIDE', 0.008371696], ['12h_RSI1', 0.008433132], ['12h_CDLDOJISTAR', 0.008442926], ['2h_CDLHARAMI', 0.008585071], ['12h_HT_SINE2', 0.00862616], ['2h_CDLINVERTEDHAMMER', 0.008895466], ['2h_CDLEVENINGSTAR', 0.0089491615], ['2h_CDLEVENINGDOJISTAR', 0.009204795], ['12h_CDLSHOOTINGSTAR', 0.009292671], ['2h_CDLHARAMICROSS', 0.009716747], ['12h_CDLGRAVESTONEDOJI', 0.010730275], ['12h_CDLXSIDEGAP3METHODS', 0.010756237], ['12h_CDLADVANCEBLOCK', 0.011024542], ['12h_CDLINVERTEDHAMMER', 0.01123011], ['2h_CDLHOMINGPIGEON', 0.011550584], ['12h_CDLMATCHINGLOW', 0.011581958], ['2h_CDLHIGHWAVE', 0.012166354], ['2h_CDLIDENTICAL3CROWS', 0.012635947], ['12h_CDLDARKCLOUDCOVER', 0.013173721], ['2h_CDL3WHITESOLDIERS', 0.013688072], ['12h_CDLEVENINGDOJISTAR', 0.014140383], ['12h_CDLHARAMI', 0.015873326], ['2h_CDL3INSIDE', 0.016944865], ['2h_CDLHAMMER', 0.018823868], ['12h_CDLTASUKIGAP', 0.023678469], ['12h_CDLHIKKAKEMOD', 0.024157867]]
  }, {
    model: 'LGBMRegressor',
    performance: 3.7,
    up: 0.582,
    down: 0.0,
    data: [['2h_CDLRICKSHAWMAN', 0], ['2h_CDLBREAKAWAY', 0], ['2h_CDLDOJI', 0], ['2h_CDLDOJISTAR', 0], ['2h_CDLSHOOTINGSTAR', 0], ['2h_CDLHIKKAKEMOD', 0], ['2h_CDLRISEFALL3METHODS', 0], ['2h_CDLGRAVESTONEDOJI', 0], ['2h_CDLHANGINGMAN', 0], ['2h_CDLTASUKIGAP', 0], ['2h_CDLXSIDEGAP3METHODS', 0], ['2h_CDLHAMMER', 0], ['2h_CDLINVERTEDHAMMER', 0], ['2h_CDLLONGLEGGEDDOJI', 0], ['2h_CDLADVANCEBLOCK', 0], ['2h_CDL2CROWS', 0], ['2h_CDLSTALLEDPATTERN', 0], ['2h_CDL3BLACKCROWS', 0], ['2h_CDLUNIQUE3RIVER', 0], ['2h_CDL3WHITESOLDIERS', 0], ['2h_CDLENGULFING', 0], ['2h_HT_TRENDMODE', 0], ['2h_CDLIDENTICAL3CROWS', 0], ['2h_CDL3OUTSIDE', 0], ['2h_CDLMATCHINGLOW', 0], ['2h_CDLGAPSIDESIDEWHITE', 0], ['2h_CDLDARKCLOUDCOVER', 0], ['2h_CDL3INSIDE', 0], ['2h_CDLHARAMICROSS', 0], ['2h_CDLEVENINGDOJISTAR', 0], ['2h_CDLMORNINGDOJISTAR', 0], ['2h_CDLSEPARATINGLINES', 0], ['2h_CDLTHRUSTING', 0], ['2h_CDLHOMINGPIGEON', 0], ['2h_CDLPIERCING', 0], ['2h_CDLEVENINGSTAR', 0], ['12h_CDLMARUBOZU', 0], ['12h_CDLRICKSHAWMAN', 0], ['12h_CDLBREAKAWAY', 0], ['12h_CDLDOJI', 0], ['12h_CDLDOJISTAR', 0], ['12h_CDLSHOOTINGSTAR', 0], ['12h_CDLHIKKAKEMOD', 0], ['12h_CDLRISEFALL3METHODS', 0], ['12h_CDLDRAGONFLYDOJI', 0], ['12h_CDLGRAVESTONEDOJI', 0], ['12h_CDLHANGINGMAN', 0], ['12h_CDLTASUKIGAP', 0], ['12h_CDLXSIDEGAP3METHODS', 0], ['12h_CDLHAMMER', 0], ['12h_CDLINVERTEDHAMMER', 0], ['12h_CDLLONGLEGGEDDOJI', 0], ['12h_CDLADVANCEBLOCK', 0], ['12h_CDL2CROWS', 0], ['12h_CDLSTALLEDPATTERN', 0], ['12h_CDLTAKURI', 0], ['12h_CDLSPINNINGTOP', 0], ['12h_CDLSHORTLINE', 0], ['12h_CDL3BLACKCROWS', 0], ['12h_CDLUNIQUE3RIVER', 0], ['12h_CDL3WHITESOLDIERS', 0], ['12h_HT_TRENDMODE', 0], ['12h_CDLIDENTICAL3CROWS', 0], ['12h_CDLMATCHINGLOW', 0], ['12h_CDLGAPSIDESIDEWHITE', 0], ['12h_CDLDARKCLOUDCOVER', 0], ['12h_CDL3INSIDE', 0], ['12h_CDLHARAMICROSS', 0], ['12h_CDLEVENINGDOJISTAR', 0], ['12h_CDLMORNINGDOJISTAR', 0], ['12h_CDLSEPARATINGLINES', 0], ['12h_CDLTHRUSTING', 0], ['12h_CDLHOMINGPIGEON', 0], ['12h_CDLPIERCING', 0], ['12h_CDLEVENINGSTAR', 0], ['12h_CDLCLOSINGMARUBOZU', 1], ['12h_CDLENGULFING', 1], ['12h_CDLHARAMI', 1], ['12h_CDLHIGHWAVE', 1], ['2h_CDLMARUBOZU', 2], ['2h_CDLDRAGONFLYDOJI', 2], ['2h_CDLLONGLINE', 2], ['2h_CDLTAKURI', 2], ['2h_CDLSHORTLINE', 2], ['12h_CDLHIKKAKE', 2], ['2h_CDLBELTHOLD', 4], ['2h_CDLHIGHWAVE', 4], ['2h_CDLCLOSINGMARUBOZU', 5], ['12h_CDLBELTHOLD', 5], ['12h_CDLLONGLINE', 6], ['12h_CDL3OUTSIDE', 6], ['2h_CDLHARAMI', 10], ['12h_RSI2', 15], ['2h_CDLHIKKAKE', 16], ['2h_STOCHF3', 16], ['2h_CDLSPINNINGTOP', 18], ['12h_STOCHF1', 19], ['12h_RSI1', 22], ['12h_STOCHF3', 28], ['2h_STOCHF1', 29], ['12h_STOCHRSI2', 29], ['12h_PPO4', 30], ['12h_TRIX1', 32], ['12h_CMO2', 37], ['12h_STOCHF4', 40], ['12h_HT_SINE2', 41], ['2h_TRIX2', 42], ['2h_PPO2', 43], ['12h_STOCH2', 46], ['12h_CMO1', 47], ['12h_WILLR1', 47], ['12h_PPO1', 49], ['12h_HT_DCPHASE', 49], ['12h_STOCHRSI4', 51], ['12h_AROONOSC1', 52], ['12h_TRIX2', 55], ['12h_HT_PHASOR1', 58], ['12h_CCI2', 60], ['12h_STOCH4', 61], ['12h_PPO2', 61], ['12h_PPO3', 64], ['12h_MFI2', 66], ['2h_PPO3', 67], ['12h_STOCH1', 67], ['12h_ULTOSC2', 67], ['2h_RSI2', 68], ['2h_TRIX1', 68], ['2h_PPO4', 68], ['12h_AROONOSC2', 69], ['2h_RSI1', 71], ['12h_WILLR2', 72], ['12h_STOCH3', 74], ['12h_DX1', 78], ['2h_CMO2', 82], ['12h_ULTOSC1', 82], ['12h_STOCHRSI1', 82], ['12h_STOCHRSI3', 86], ['2h_AROONOSC2', 87], ['2h_HT_DCPHASE', 87], ['12h_HT_SINE1', 87], ['2h_PPO1', 89], ['12h_ADX1', 91], ['12h_DX2', 92], ['12h_MFI1', 95], ['2h_AROONOSC1', 97], ['12h_CCI1', 97], ['12h_STOCHF2', 103], ['2h_STOCH4', 105], ['2h_HT_PHASOR2', 107], ['12h_HT_PHASOR2', 107], ['2h_HT_SINE2', 110], ['2h_MFI2', 111], ['2h_ADX2', 113], ['2h_HT_PHASOR1', 115], ['2h_STOCHRSI4', 116], ['2h_ULTOSC1', 117], ['2h_ADX1', 118], ['2h_WILLR1', 120], ['12h_ADX2', 122], ['2h_CCI2', 123], ['2h_ULTOSC2', 128], ['2h_HT_SINE1', 132], ['12h_HT_DCPERIOD', 132], ['2h_CCI1', 136], ['2h_STOCHRSI3', 139], ['2h_DX1', 142], ['2h_STOCH3', 143], ['2h_STOCHF4', 147], ['2h_MFI1', 155], ['2h_WILLR2', 156], ['2h_STOCH1', 158], ['2h_CMO1', 159], ['2h_STOCH2', 164], ['2h_HT_DCPERIOD', 168], ['2h_DX2', 169], ['2h_STOCHRSI2', 176], ['2h_STOCHRSI1', 188], ['2h_STOCHF2', 202]]
  }, {
    model: 'LinearRegression',
    performance: 3.7,
    up: 0.584,
    down: 0,
    data: [['12h_CDLIDENTICAL3CROWS', 1.84297022087776e-14], ['12h_CDL3BLACKCROWS', 2.3092638912203256e-14], ['12h_CDLBREAKAWAY', 7.078782005009998e-13], ['12h_CDLHARAMICROSS', -0.00030388801919271636], ['12h_HT_SINE2', 0.000666135804158021], ['2h_CDLSHOOTINGSTAR', -0.001133171739415099], ['12h_HT_TRENDMODE', 0.0015271396835009551], ['2h_CDLSHORTLINE', -0.003063214681320397], ['2h_CDLXSIDEGAP3METHODS', -0.0037579748614959686], ['12h_CDLMORNINGDOJISTAR', -0.00576503554607691], ['12h_CDLXSIDEGAP3METHODS', 0.0062239527392579305], ['2h_HT_SINE2', 0.008729476255368847], ['2h_CDLHANGINGMAN', 0.009985669786167939], ['2h_CDLHARAMICROSS', 0.010989363665126574], ['12h_CDLHARAMI', 0.011384853799703968], ['2h_HT_TRENDMODE', -0.012270958312680744], ['12h_CDLHIKKAKE', 0.013491983210601705], ['2h_HT_DCPHASE', 0.014803620085180082], ['12h_CDLRISEFALL3METHODS', -0.01519863391673197], ['12h_HT_SINE1', 0.01644874654212442], ['12h_STOCH2', 0.016488641539222228], ['12h_DX1', -0.016735348879020943], ['2h_CDLSEPARATINGLINES', -0.02156384324986203], ['12h_CDLDOJI', -0.0216704564817829], ['12h_CDLGRAVESTONEDOJI', 0.021867806923125673], ['2h_CDLLONGLINE', -0.022459483178516322], ['2h_CDLHARAMI', 0.022510085471237506], ['2h_HT_SINE1', -0.023094029808314518], ['12h_STOCH3', -0.024315784787422703], ['2h_CDLDOJISTAR', -0.026418101558932545], ['12h_CDLDOJISTAR', -0.027191223856372862], ['2h_CDLHIKKAKEMOD', 0.028074707294045348], ['12h_CDLLONGLINE', -0.028163095803954513], ['2h_AROONOSC2', -0.030170625407234686], ['12h_CDLSHORTLINE', -0.031340253254613724], ['12h_CDLENGULFING', -0.03193409527666043], ['12h_CDLEVENINGSTAR', -0.03326557578693401], ['2h_CDLSTALLEDPATTERN', 0.03382304414185043], ['2h_CDL3OUTSIDE', -0.033900327670197225], ['12h_CDLHOMINGPIGEON', -0.03421362694110465], ['2h_CDLENGULFING', 0.034527461486258695], ['12h_CDLBELTHOLD', -0.03481618524872456], ['12h_CDLSEPARATINGLINES', -0.03591347004403199], ['2h_CDLHIGHWAVE', 0.039052223576702745], ['12h_CDLSPINNINGTOP', 0.040340774900655116], ['12h_CDLHAMMER', 0.042480929827255834], ['2h_CDLINVERTEDHAMMER', 0.04338304787876551], ['2h_AROONOSC1', 0.043424078795128836], ['2h_CDLRISEFALL3METHODS', -0.044214530408335284], ['2h_CDLCLOSINGMARUBOZU', -0.04519302119524705], ['2h_HT_DCPERIOD', 0.04692627290893259], ['12h_AROONOSC1', -0.047308696689491773], ['12h_HT_DCPHASE', 0.053455626871785976], ['2h_DX1', 0.05405323279428713], ['2h_CDLRICKSHAWMAN', 0.06297569491397438], ['2h_ADX2', 0.06300810673567635], ['12h_CDLHIGHWAVE', -0.06401831498209608], ['12h_CDL3WHITESOLDIERS', 0.06478773316622316], ['2h_CDLMATCHINGLOW', -0.06589717775660776], ['12h_CDLRICKSHAWMAN', -0.0678494656998978], ['12h_CDLMATCHINGLOW', 0.06830353967533473], ['12h_CDLCLOSINGMARUBOZU', -0.06865901610502492], ['2h_CDLBELTHOLD', -0.06960815439498153], ['2h_CDLPIERCING', 0.07000925001513905], ['12h_CDLLONGLEGGEDDOJI', 0.07476120274623009], ['12h_AROONOSC2', 0.07607075028607979], ['12h_STOCHRSI3', 0.07827842637229025], ['12h_CDLADVANCEBLOCK', -0.08311456101073258], ['12h_CDLSTALLEDPATTERN', -0.08345672365769564], ['2h_CDLMORNINGDOJISTAR', 0.0850755438863605], ['12h_CDLTHRUSTING', 0.08807205451200958], ['12h_ULTOSC1', 0.08819012678270478], ['12h_WILLR2', 0.08828607274948877], ['12h_HT_DCPERIOD', -0.08885857793784503], ['12h_CDLMARUBOZU', 0.08912211273791985], ['12h_STOCHRSI2', 0.08933281953835166], ['2h_CDLSPINNINGTOP', -0.09263372927443905], ['2h_CDLBREAKAWAY', -0.09274799926544366], ['12h_CDL3INSIDE', -0.09278677013925152], ['2h_MFI1', 0.09398111083352306], ['2h_RSI1', 0.0941824812469636], ['12h_CDLHANGINGMAN', 0.09847462531617733], ['12h_HT_PHASOR1', 0.10084190976312205], ['12h_CDL3OUTSIDE', -0.10164576852705444], ['2h_CDLGRAVESTONEDOJI', 0.10373432528495337], ['12h_PPO4', -0.10461035617945608], ['12h_MFI2', 0.10549010975334082], ['2h_CDLHIKKAKE', 0.10703926761010521], ['2h_ADX1', -0.10778148132146277], ['12h_MFI1', -0.10916145600814896], ['2h_CDLDRAGONFLYDOJI', 0.1108223849570515], ['12h_STOCHRSI4', 0.11133361597906687], ['2h_CDLHAMMER', -0.11281948032850059], ['12h_CDLHIKKAKEMOD', 0.11602330343404314], ['12h_CDLDRAGONFLYDOJI', 0.11710770373512618], ['2h_CDLTAKURI', 0.11878622225566346], ['2h_STOCHRSI4', 0.12056083265783961], ['12h_ULTOSC2', -0.12604219487026522], ['2h_CDLADVANCEBLOCK', 0.12862252381806588], ['2h_CDLMARUBOZU', 0.13687690705972122], ['12h_STOCHF4', -0.1491607065908532], ['12h_CDL2CROWS', 0.16064481995645954], ['2h_CDLDARKCLOUDCOVER', -0.18450681619137282], ['2h_CDLEVENINGSTAR', 0.1849248643687185], ['2h_CDLHOMINGPIGEON', 0.1886918738646825], ['2h_CDL3WHITESOLDIERS', 0.18952448745390202], ['12h_STOCH1', -0.19112937400298285], ['12h_CDLTAKURI', -0.19213958327042602], ['2h_CDLUNIQUE3RIVER', 0.19716998977871744], ['2h_CDLLONGLEGGEDDOJI', 0.20003218058983013], ['2h_WILLR1', -0.2191733708885103], ['2h_STOCHF2', 0.21980369933807414], ['2h_STOCHF4', -0.2269494537335142], ['12h_STOCHF2', -0.2312278362974101], ['2h_STOCHRSI2', -0.24601297350515733], ['12h_DX2', 0.2497954790543749], ['2h_CDLGAPSIDESIDEWHITE', -0.2531717844129403], ['12h_CDLSHOOTINGSTAR', 0.25516808568194144], ['12h_ADX1', -0.25852603611315433], ['2h_STOCHRSI3', 0.2701125900795899], ['12h_CDLGAPSIDESIDEWHITE', -0.2725703763624295], ['12h_CDLEVENINGDOJISTAR', -0.2763834195408622], ['2h_CDLDOJI', -0.2818678147338625], ['2h_CDL2CROWS', 0.2845531048737178], ['2h_DX2', 0.2953447604251486], ['12h_STOCHRSI1', -0.2962773580982281], ['12h_RSI1', 0.30423326079453655], ['12h_CDLPIERCING', 0.31332734587319233], ['2h_STOCHF3', 0.3146781858908015], ['12h_HT_PHASOR2', 0.3370320956319147], ['2h_CDLTHRUSTING', 0.3394243093630927], ['12h_ADX2', 0.3415029257316097], ['12h_CDLDARKCLOUDCOVER', -0.352372253521239], ['12h_STOCH4', 0.37401536886167086], ['2h_CDLEVENINGDOJISTAR', 0.3766862173351297], ['2h_CDLTASUKIGAP', -0.3833452376917209], ['2h_STOCH2', 0.38814481099032005], ['12h_CMO1', 0.4052197165044421], ['12h_CDLINVERTEDHAMMER', -0.40605982392737777], ['2h_WILLR2', -0.4267043949784095], ['2h_STOCHF1', -0.435817781079239], ['12h_STOCHF3', -0.4374227529571888], ['12h_STOCHF1', 0.4431343055797764], ['2h_STOCH4', -0.4532848411671644], ['2h_CDL3INSIDE', 0.455167136163397], ['12h_CCI2', 0.45725151208055664], ['2h_PPO4', -0.48213936916318834], ['2h_CCI2', 0.4966320916538764], ['12h_PPO3', 0.5211457930314075], ['12h_WILLR1', 0.5219714544512274], ['2h_STOCH1', -0.527027424750635], ['2h_MFI2', 0.5627823793502716], ['2h_CDLIDENTICAL3CROWS', 0.5682711920512352], ['2h_CMO1', -0.5691046973557172], ['2h_CDL3BLACKCROWS', 0.5727072947556789], ['12h_CDLUNIQUE3RIVER', 0.6262960933440499], ['2h_STOCH3', -0.6527505234982256], ['2h_ULTOSC1', 0.6963839998634778], ['2h_PPO2', -0.7047684050796129], ['2h_ULTOSC2', 0.7082226246403086], ['2h_STOCHRSI1', 0.7204186532545469], ['2h_RSI2', -0.7546432599792539], ['2h_TRIX1', 0.7765358843892078], ['12h_CMO2', 0.7885981862632857], ['12h_CCI1', 0.794530092456037], ['2h_PPO3', 1.0553703507549768], ['2h_HT_PHASOR2', -1.1208152599075405], ['2h_CMO2', -1.221989386554287], ['12h_RSI2', -1.3103073049389728], ['2h_CCI1', 1.50769108342216], ['12h_PPO1', -1.7473755972163592], ['2h_HT_PHASOR1', 1.827127096378373], ['12h_CDLTASUKIGAP', 1.855306961975059], ['2h_PPO1', -1.9603546072144482], ['12h_PPO2', -2.0684796189191075], ['12h_TRIX2', 4.889314185398543], ['12h_TRIX1', -7.053767697847001], ['2h_TRIX2', 40.00001225905634]]
  }, {
    model: 'BayesianRidge',
    performance: 4.5,
    up: 0.706,
    down: 0,
    data: [['12h_CDL3BLACKCROWS', -5.839284085787898e-17], ['12h_CDLIDENTICAL3CROWS', 1.580206971024898e-16], ['12h_CDLBREAKAWAY', 5.230576674467304e-16], ['2h_HT_TRENDMODE', 1.2333794857466775e-06], ['2h_HT_DCPERIOD', 2.159409555781628e-05], ['2h_CDLHARAMI', 2.7417253918886987e-05], ['12h_STOCHF1', -5.208641512763202e-05], ['12h_HT_SINE2', 5.56887482107412e-05], ['12h_STOCH2', -0.00013239690681873947], ['12h_CDLDOJI', 0.0004662683260909263], ['2h_STOCHRSI2', 0.0005512363715089588], ['12h_CDLHAMMER', 0.0006411213255442772], ['12h_STOCHRSI3', -0.0006613358515969833], ['2h_CDLLONGLEGGEDDOJI', 0.0007557849646660076], ['12h_CDLLONGLEGGEDDOJI', -0.0008004215494614956], ['2h_CDLRICKSHAWMAN', -0.0009626043376311051], ['12h_CDLSHORTLINE', -0.0010721997463458176], ['12h_HT_DCPHASE', 0.00120840090358549], ['2h_CDLSHORTLINE', -0.0012915602593482978], ['2h_STOCHRSI3', -0.0013185892079082453], ['2h_WILLR2', -0.0015157323763262222], ['2h_CDLENGULFING', -0.0016114168455231778], ['2h_CDLPIERCING', 0.0016806974999621093], ['2h_CDLRISEFALL3METHODS', -0.0018076299403764046], ['12h_CDLSPINNINGTOP', 0.0018917577648636297], ['2h_CDLDOJI', -0.0019393459790479546], ['12h_STOCH3', 0.0019486793125706636], ['12h_HT_TRENDMODE', -0.0021136811129165095], ['12h_CDLMORNINGDOJISTAR', -0.0021723091288742436], ['2h_CDLXSIDEGAP3METHODS', -0.0031179110475963324], ['12h_HT_SINE1', 0.003588994004958701], ['2h_ADX1', -0.0038801974946154083], ['12h_AROONOSC1', 0.0038892004652060184], ['12h_ULTOSC2', 0.0041394687276383865], ['12h_MFI1', -0.004186831665307609], ['12h_STOCH1', -0.004324602708673384], ['2h_HT_DCPHASE', -0.004383787671800069], ['12h_CDLCLOSINGMARUBOZU', 0.004533252253335956], ['2h_STOCH4', 0.004848396138053547], ['12h_CDLGRAVESTONEDOJI', -0.0049686961700297775], ['12h_STOCHF3', 0.00498875355878545], ['2h_STOCHF3', 0.0050031821479455466], ['12h_STOCH4', 0.00501361522319985], ['12h_CDLRICKSHAWMAN', -0.0050961899804045], ['12h_MFI2', -0.005150512251954873], ['2h_HT_SINE2', 0.005536093785679986], ['2h_STOCH1', -0.005627735208673941], ['2h_CDLSHOOTINGSTAR', -0.0056417561216478476], ['2h_CDLDOJISTAR', -0.005767551154079613], ['2h_CDLCLOSINGMARUBOZU', -0.006224433937046549], ['2h_CDLMARUBOZU', 0.0062767180410817245], ['12h_CDLHIGHWAVE', -0.0064735155811202335], ['2h_STOCHRSI4', 0.0065338352025137774], ['12h_CDL3INSIDE', -0.006682798057037648], ['12h_CDLDOJISTAR', -0.0067939210795513], ['12h_CDLLONGLINE', 0.006798838266153093], ['2h_AROONOSC2', 0.007009417219877154], ['12h_CDLXSIDEGAP3METHODS', -0.007028586693161725], ['12h_STOCHRSI1', -0.007086601575556822], ['12h_CDLDRAGONFLYDOJI', -0.007163273194637774], ['12h_CDLHARAMICROSS', 0.007338143536420018], ['2h_STOCHF4', -0.007557276727064311], ['2h_ADX2', -0.007600885992866271], ['2h_AROONOSC1', 0.007965154515418061], ['2h_CDLHANGINGMAN', -0.008086317608847293], ['12h_CDL3WHITESOLDIERS', 0.008109735798903532], ['12h_CDLHIKKAKE', 0.00811697253804608], ['2h_CDLHARAMICROSS', 0.008384696493497665], ['12h_CDLENGULFING', 0.008860192895678482], ['12h_DX1', 0.00900959254626461], ['2h_CDL3OUTSIDE', -0.009166945714234301], ['12h_CDLSEPARATINGLINES', 0.009210185301633334], ['2h_RSI2', 0.009213802271984034], ['2h_CDLMORNINGDOJISTAR', 0.009511859742234688], ['2h_CDLHIGHWAVE', -0.010030219625267374], ['12h_TRIX1', 0.010032652806708574], ['2h_WILLR1', -0.010093440271588929], ['12h_CDLMARUBOZU', 0.010137424778686534], ['2h_CDLSEPARATINGLINES', -0.010388572154434542], ['2h_CMO1', 0.0105278610347645], ['12h_STOCHRSI4', 0.010541283801996327], ['2h_CDLLONGLINE', -0.010641758501332624], ['12h_AROONOSC2', 0.010646145309070093], ['2h_CDLMATCHINGLOW', -0.010744110727461202], ['12h_STOCHRSI2', 0.010746700063671358], ['2h_CMO2', 0.011163449284607373], ['12h_RSI2', -0.011630451922913981], ['12h_CDLBELTHOLD', 0.011952979323010529], ['12h_STOCHF2', 0.012172589594839812], ['2h_CDLGRAVESTONEDOJI', 0.01275331476718363], ['12h_CDLHARAMI', 0.01354138735298497], ['12h_CDLSTALLEDPATTERN', 0.013555426414750842], ['12h_ULTOSC1', 0.013863372379809972], ['12h_HT_PHASOR2', -0.01396547328149015], ['12h_PPO3', 0.01420124932380543], ['12h_CMO1', 0.014496205154278132], ['12h_CDLTAKURI', -0.01455108275480796], ['12h_CDL3OUTSIDE', -0.014673355795985546], ['2h_CDLBELTHOLD', -0.014710924784820506], ['12h_CDLTHRUSTING', 0.015123302789684108], ['12h_CDLADVANCEBLOCK', -0.015730253385617836], ['12h_STOCHF4', 0.01607700209133605], ['2h_PPO4', 0.016163556217915074], ['12h_CMO2', 0.016665839545992038], ['2h_STOCHF2', -0.01678351009428997], ['2h_STOCHF1', -0.016987742642007326], ['12h_ADX1', -0.017016183752351522], ['2h_STOCH2', -0.017035870064482844], ['12h_CDLEVENINGSTAR', -0.017121317363644854], ['2h_STOCH3', -0.017165513592680124], ['2h_CDLSPINNINGTOP', -0.017676200122123516], ['12h_CDLRISEFALL3METHODS', 0.0176787852818755], ['2h_HT_SINE1', 0.017904454213693494], ['2h_RSI1', 0.018471036010952614], ['12h_CDLHANGINGMAN', 0.01920384451348767], ['2h_PPO3', -0.019826986370626565], ['2h_MFI1', 0.02073506961846418], ['2h_DX1', 0.021332541863787656], ['12h_RSI1', 0.022199607204356427], ['12h_WILLR1', 0.023128200478938203], ['12h_PPO4', -0.023861971409619244], ['2h_CDLTAKURI', 0.024151890904105227], ['2h_CDLDRAGONFLYDOJI', 0.024270271494695416], ['2h_CDLHIKKAKE', 0.0245883420107006], ['2h_CDLSTALLEDPATTERN', 0.024659559303844173], ['12h_DX2', 0.024788127086948428], ['12h_ADX2', 0.025525632258391828], ['12h_WILLR2', 0.025683227152786134], ['2h_CDLHAMMER', -0.02644040162105485], ['12h_CDLHOMINGPIGEON', 0.02880206833762008], ['2h_CDLINVERTEDHAMMER', 0.029043818366588262], ['12h_PPO2', -0.029086223750381685], ['12h_CDLHIKKAKEMOD', 0.029490056797486754], ['12h_CDLMATCHINGLOW', 0.030017211671821677], ['12h_HT_DCPERIOD', -0.030491700308119398], ['2h_DX2', 0.030957066992897256], ['2h_PPO2', 0.030992927714891715], ['2h_ULTOSC2', 0.03232704731860242], ['2h_CDLADVANCEBLOCK', 0.03357960072696292], ['12h_CCI2', 0.03416409353060035], ['2h_MFI2', 0.03599025847350409], ['12h_TRIX2', -0.036453077216174815], ['2h_STOCHRSI1', 0.040307329337513555], ['2h_CDLHIKKAKEMOD', 0.04551602031747017], ['12h_HT_PHASOR1', -0.04807603023848694], ['12h_CDLEVENINGDOJISTAR', -0.04948213014873047], ['2h_CDL2CROWS', 0.052842174640303885], ['2h_CCI2', 0.056082582495923426], ['2h_CDLEVENINGSTAR', 0.05641853719350875], ['12h_CDLGAPSIDESIDEWHITE', -0.05885700355173398], ['2h_CDLUNIQUE3RIVER', 0.05977350341747327], ['2h_CDLHOMINGPIGEON', 0.05983603865613202], ['2h_CDLBREAKAWAY', -0.05988091395811255], ['12h_PPO1', -0.0626953475444645], ['2h_CDLGAPSIDESIDEWHITE', -0.06327158908343476], ['12h_CCI1', 0.06329247710262298], ['2h_TRIX2', 0.06372031346038558], ['2h_CDL3WHITESOLDIERS', 0.06419691938148578], ['12h_CDL2CROWS', 0.06668644407812824], ['2h_CDLDARKCLOUDCOVER', -0.0689420757335541], ['12h_CDLSHOOTINGSTAR', 0.069430435006277], ['12h_CDLPIERCING', 0.07047227312301174], ['2h_ULTOSC1', 0.07252924775063413], ['12h_CDLDARKCLOUDCOVER', -0.07366606194037367], ['2h_CCI1', 0.07664701676008079], ['12h_CDLINVERTEDHAMMER', -0.08536134240180596], ['2h_CDLTHRUSTING', 0.09788110955290358], ['2h_CDLTASUKIGAP', -0.10944747503001744], ['2h_CDL3INSIDE', 0.11111531411015742], ['2h_CDLEVENINGDOJISTAR', 0.12275727655110082], ['2h_TRIX1', -0.13377150200368307], ['2h_CDLIDENTICAL3CROWS', 0.16236099383751595], ['12h_CDLUNIQUE3RIVER', 0.20188634678822004], ['2h_PPO1', -0.23840133143384282], ['2h_CDL3BLACKCROWS', 0.26146524034524304], ['2h_HT_PHASOR2', -0.2967550430480972], ['12h_CDLTASUKIGAP', 0.5121301797680741], ['2h_HT_PHASOR1', 0.5974159483599372]]
  }];

  function showTable(tableData) {
    let tableString = '<table>';

    // table headers/modelNames
    tableString += '<tr>';
    tableString += Object.keys(tableData[0]).map(modelName => {
      return `<td><span class='sorting' onclick="sortByModel('${modelName}', 'up');">Up </span>${modelName}<span class='sorting' onclick="sortByModel('${modelName}', 'down');"> Down</span></td>`;
    }).join('');
    tableString += '</tr>';

    // table body/model performance data
    tableData.forEach(feature => {
      tableString += '<tr>';
      tableString += Object.keys(feature).map(modelName => {
        return `<td>${feature[modelName]}</td>`;
      }).join('');
      tableString += '</tr>';
    });

    tableString += '</table>';

    document.querySelector('#tableContainer').innerHTML = tableString;
  }

  function showDefaultTable() {
    showModelPerformance();

    computeFeatures();
    const tableData = _.sortBy(featureArray, (v) => { return Math.abs(v.Total); });
    showTable(tableData);
  }

  function showUnique() {
    const featureNames = document.querySelector('#featuresTextarea').value.split('\n');
    const featuresList = Array.from(new Set(featureNames));
    document.querySelector('#featuresTextarea').value = featuresList.sort().join('\n');
  }

  function showModelPerformance() {
    let tableString = '<table>';
    tableString += '<tr><td>ModelName</td><td>Up Correct Ratio</td><td>Down Correct Ratio</td></tr>';
    fs.forEach(m => {
      const { model, performance, up, down } = m;
      tableString += '<tr>';
      tableString += `<td>${model}</td>`;
      tableString += `<td>${performance}</td>`;
      tableString += `<td>${up}</td>`;
      tableString += `<td>${down}</td>`;
      tableString += `</tr>`;
    });
    tableString += '</table>';

    document.querySelector('#modelPeformance').innerHTML = tableString;
  }

  function sortByModel(modelName, direction) {
    let tableData = _.sortBy(featureArray, (v) => { return Math.abs(v[modelName]); });
    if (direction === 'down')
      tableData = tableData.reverse();

    showTable(tableData);
  }

  function computeFeatures() {
    const features = {};
    fs.forEach(m => {
      let totalAbsolute = 0;
      const { model, data } = m;
      const ratio = H100_WEIGHTS[model] || 1;
      data.forEach(d => {
        const featureName = d[0];
        const featureValue = d[1] * ratio;
        totalAbsolute += Math.abs(featureValue);
        if (!features[featureName]) features[featureName] = {};
        features[featureName][model] = featureValue;
      });
      console.log('total', [model, totalAbsolute])
    });

    // compute total and then convert the object to array
    Object.keys(features).forEach(featureName => {
      const feature = features[featureName];
      feature['Total'] = Object.keys(feature)
        .map(modelName => feature[modelName])
        .reduce(function (prev, curr, idx, arr) {
          return Math.abs(prev) + Math.abs(curr);
        });
      feature['FeatureName'] = featureName;
    });

    featureArray = Object.keys(features).map(featureName => features[featureName]);
  }

</script>

</html>